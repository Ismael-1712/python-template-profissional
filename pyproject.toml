# Define o sistema de build do projeto.
# Usamos 'setuptools', o padrão moderno.
[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

# Metadados do Projeto (PEP 621)
# Estes são "placeholders" que seu script newproject v1.4 irá substituir.
[project]
name = "meu_projeto_placeholder"
version = "0.1.0"
description = "Descrição do meu novo projeto."
readme = "README.md"
requires-python = ">=3.10"
license = { file = "LICENSE" }
authors = [
    { name = "Seu Nome", email = "seu-email@dominio.com" }
]

# Dependências do projeto (API)
dependencies = [
    # O framework web moderno e rápido
    "fastapi",
    # O servidor ASGI (necessário para rodar o FastAPI)
    "uvicorn[standard]",
]

# Dependências de desenvolvimento
[project.optional-dependencies]
dev = [
    "pip-tools~=7.4"
]

# --- Configuração das Ferramentas ---

# Configuração do Ruff (Linter e Formatador)
[tool.ruff]
# Define o comprimento máximo da linha (padrão 'black')
line-length = 88

# Define o versão mínima do Python para compatibilidade de regras
target-version = "py310"

# Configuração do Linter do Ruff
[tool.ruff.lint]
# Seleciona um conjunto robusto de regras para fiscalizar
select = ["E", "F", "W", "I", "N", "UP", "B"]

# Configuração do Formatador do Ruff (substituto do 'black')
[tool.ruff.format]
# Usa aspas duplas " " em vez de simples ' '
quote-style = "double"
# Não adiciona vírgula no final (skip-magic-trailing-comma controla isso)
skip-magic-trailing-comma = false

# Configuração do Semantic Release
[tool.semantic_release]
# Define onde a variável de versão está
version_variable = "pyproject.toml:project.version"

# Não faça o upload para o PyPI automaticamente.
# O pipeline de CD (Prioridade 3) fará isso.
upload_to_pypi = false

# O arquivo de "RELEASES" que você pediu
changelog_file = "CHANGELOG.md"

# Quais tipos de commit causam um 'bump' de versão
build_command = "python3 -m build"
minor_on_default_scope = true
major_on_breaking_change = true

[tool.semantic_release.changelog]
# Seções do changelog
categories = ["feat", "fix", "docs", "refactor", "perf"]
